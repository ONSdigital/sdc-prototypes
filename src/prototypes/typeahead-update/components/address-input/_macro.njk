{% from "components/field/_macro.njk" import onsField %}
{% from "components/button/_macro.njk" import onsButton %}
{% from "../input/_macro.njk" import onsInput %}

{% macro prototypeAddressInput(params) %}
    <div id="address" class="field address-input js-address u-mt-s address-input--search">
        <div class="address-input__manual">
            {% if params.organisation.label %}
                {{
                    onsInput({
                        "id": params.id + "-organisation",
                        "label": {
                            "text": params.organisation.label
                        },
                        "classes": "input--w-20@m js-address-organisation",
                        "name": params.id + "-organisation"
                    })
                }}
            {% endif %}
            {{
                onsInput({
                    "id": params.id + "-line-1",
                    "label": {
                        "text": params.line1.label
                    },
                    "classes": "input--w-20@m js-address-line-1",
                    "name": params.id + "-line-1"
                })
            }}
            {{
                onsInput({
                    "id": params.id + "-line-2",
                    "label": {
                        "text": params.line2.label
                    },
                    "classes": "input--w-20@m js-address-line-2",
                    "name": params.id + "-line-2"
                })
            }}
            {{
                onsInput({
                    "id": params.id + "-town",
                    "label": {
                        "text": params.town.label
                    },
                    "classes": "js-address-town",
                    "name": params.id + "-town"
                })
            }}
            {{
                onsInput({
                    "id": params.id + "-county",
                    "label": {
                        "text": params.county.label
                    },
                    "classes": "js-address-county",
                    "name": params.id + "-county"
                })
            }}
            {{
                onsInput({
                    "id": params.id + "-postcode",
                    "label": {
                        "text": params.postcode.label
                    },
                    "classes": "input--w-5 js-address-postcode",
                    "name": params.id + "-postcode"
                })
            }}
            
            <div class="u-d-no u-mt-m js-address-search-btn-container">
                <a href="#" class="btn--link js-address-search-btn">{{ params.searchButton }}</a>
            </div>
        </div>

        <div class="address-input__search">
            {{
                onsInput({
                    "id": params.id + "-typeahead",
                    "classes": "address-input__typeahead js-typeahead-input input--w-50",
                    "label": {
                        "text": params.typeahead.label.text,
                        "description": params.typeahead.label.description
                    },
                    "typeahead": {
                        "classes": "js-address-typeahead",
                        "instructions": params.typeahead.typeahead.instructions,
                        "content": params.typeahead.typeahead.content,
                        "autocomplete": params.typeahead.typeahead.autocomplete
                    },
                    "externalInitialiser": true,
                    "resultsErrorPanel": {
                        "error": params.selectError
                    }
                })
            }}
            <a href="#" class="btn--link js-address-manual-btn">{{ params.manualButton }}</a>
        </div>
    </div>
{% endmacro %}
